{{#
    @name Contact Form
    @description Contact Form Component
    @param {string} contact_info_title - Contact info title
    @param {string} form_title - Form title
    @param {array} show_contact_info - Show contact info
    @param {array} form_fields - Form fields
#}}

<div class="grid grid-cols-1 gap-12 lg:grid-cols-2">
    {{# Contact Information #}}
    <div>
        <h3 class="mb-8 text-2xl font-bold text-gray-950">{{ contact_info_title ?? 'Visit Us' }}</h3>

        <div class="space-y-6">
            {{ if show_contact_info contains "address" && restaurant_details:address }}
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                        <svg class="size-6 text-gray-950" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class="my-1 font-semibold text-gray-950">Address</h4>
                        <p class="text-gray-950">{{ restaurant_details:address }}</p>
                    </div>
                </div>
            {{ /if }}

            {{ if show_contact_info contains "phone" && restaurant_details:phone }}
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                        <svg class="size-6 text-gray-950" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class="my-1 font-semibold text-gray-950">Phone</h4>
                        <p class="text-gray-950">
                            <a href="tel:{{ restaurant_details:phone | replace(' ', '') | replace('(', '') | replace(')', '') | replace('-', '') }}" class="transition-colors hover:text-gray-950">
                                {{ restaurant_details:phone }}
                            </a>
                        </p>
                    </div>
                </div>
            {{ /if }}

            {{ if show_contact_info contains "email" && restaurant_details:email }}
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                        <svg class="size-6 text-gray-950" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class="my-1 font-semibold text-gray-950">Email</h4>
                        <p class="text-gray-950">
                            <a href="mailto:{{ restaurant_details:email }}" class="transition-colors hover:text-gray-950">
                                {{ restaurant_details:email }}
                            </a>
                        </p>
                    </div>
                </div>
            {{ /if }}

            {{ if show_contact_info contains "hours" }}
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                        <svg class="size-6 text-gray-950" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class="my-1 font-semibold text-gray-950">Opening Hours</h4>
                        {{ if restaurant_details:hours_text }}
                            <div class="text-gray-950">
                                {{ restaurant_details:hours_text | nl2br }}
                            </div>
                        {{ /if }}
                    </div>
                </div>
            {{ /if }}

            {{ if show_contact_info contains "reservation_button" && site_details:reservation_url }}
                <div class="mt-12">
                    {{ partial:components/button
                        href="{{ site_details:reservation_url }}"
                        target="_blank"
                        text="{{ site_details:reservation_button_text ?? 'Make a Reservation' }}"
                        variant="outline" size="sm" icon="true"
                    }}
                </div>
            {{ /if }}
        </div>
    </div>

    {{# Contact Form #}}
    <div>
        <h3 class="mb-8 text-2xl font-bold text-gray-950">{{ form_title ?? 'Send us a Message' }}</h3>

        {{ form:create in="contact_submissions" }}
            {{ if success }}
                {{ partial:components/form_alert type="success" title="Thank you for your message! We'll get back to you soon." }}
            {{ /if }}
            {{ if errors }}
                {{ partial:components/form_alert type="error" title="Please correct the following errors:" :errors="errors" }}
            {{ /if }}
            <div class="mt-8 space-y-8">
                {{ form_fields }}
                    {{ if value == "name" }}
                        {{ partial:components/form_input type="text" id="name" name="name" label="Name" required="true" value="{{ old:name }}" }}
                    {{ elseif value == "email" }}
                        {{ partial:components/form_input type="email" id="email" name="email" label="Email" required="true" value="{{ old:email }}" }}
                    {{ elseif value == "phone" }}
                        {{ partial:components/form_input type="tel" id="phone" name="phone" label="Phone" value="{{ old:phone }}" }}
                    {{ elseif value == "date_time" }}
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            {{ partial:components/form_input type="date" id="preferred_date" name="preferred_date" label="Preferred Date" value="{{ old:preferred_date }}" }}
                            {{ partial:components/form_input type="time" id="preferred_time" name="preferred_time" label="Preferred Time" value="{{ old:preferred_time }}" }}
                        </div>
                    {{ elseif value == "party_size" }}
                        {{ partial:components/form_select
                            id="party_size"
                            name="party_size"
                            label="Party Size"
                            placeholder="Select party size"
                            value="{{ old:party_size }}"
                            :options="[
                                ['value' => '1', 'label' => '1 person'],
                                ['value' => '2', 'label' => '2 people'],
                                ['value' => '3', 'label' => '3 people'],
                                ['value' => '4', 'label' => '4 people'],
                                ['value' => '5', 'label' => '5 people'],
                                ['value' => '6', 'label' => '6 people'],
                                ['value' => '7+', 'label' => '7+ people']
                            ]"
                        }}
                    {{ /if }}
                {{ /form_fields }}
            </div>
            {{ form_fields }}
                {{ if value == "message" }}
                    {{ partial:components/form_textarea id="message" name="message" label="Message" required="true" value="{{ old:message }}" rows="6" class="mt-6" }}
                {{ /if }}
            {{ /form_fields }}
            <div class="mt-8">
                {{ partial:components/button text="Send Message" type="submit" size="lg" icon="true" class="transition-transform duration-200 will-change-transform hover:scale-[97%]" }}
            </div>
        {{ /form:create }}
    </div>
</div>
